<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name=viewport content="width=device-width,height=device-height,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1">
  <title>遥控示例</title>
  <script>
      (function () {
          function o() {
              document.documentElement.style.fontSize = parseInt((document.documentElement.clientWidth > 414 ? 414 : document.documentElement.clientWidth) * 13 / 375) + "px"
          }
          var e = null;
          window.addEventListener("resize", function () {
              clearTimeout(e), e = setTimeout(o, 100)
          }, !1), o()
      })(window);
  </script>
  <link rel="stylesheet" href="font/iconfont.css">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/style.css">
  <script src="js/vue.min.js"></script>
  <script src="js/socket.io.js"></script>
</head>
<body style="display:none;">
  <div id="main" class="main flex column h100vh">
      <header class="flex_1">
          <div class="outerdiv">
              <div class="innerdiv">
                <div class="circle"></div>
                <div class="maintxt tcenter flex acenter jcenter">
                  <div>
                      <div>空气质量</div>
                      <div class="big20">{{area}}</div>
                      <div>PM2.5: {{areaqua}}pg/m³</div>
                  </div>
                </div>
              </div>
              <div class="discrible tcenter">
                <a href="detail.html">空气质量详情 <i class="iconfont icon-more"></i></a>
              </div>
          </div>
      </header>
      <section class="mainpage flex_1 scroll">
          <dl class="flex column h100 bbox">
            <dd class="flex_1 flex">
              <div class="flex_1 flex column acenter jcenter item">
                  <p>
                    <span>PM2.5</span>
                  </p>
                  <div>
                    <p>室内&emsp;<label class="colormain">{{pmin}}pg/m³</label></p>
                    <p>室外&emsp;<label class="colorwarn">{{pmout}}pg/m³</label></p>
                  </div>
              </div>
              <div class="flex_1 flex column acenter jcenter item">
                  <p>
                    <span>PM10</span>
                  </p>
                  <div>
                    <p>室内&emsp;<label class="colormain">{{pm10in}}pg/m³</label></p>
                    <p>室外&emsp;<label class="colorwarn">{{pm10out}}pg/m³</label></p>
                  </div>
              </div>
            </dd>
            <dd class="flex_1 flex">
                <div class="flex_1 flex column acenter jcenter item">
                    <p>
                      <span>甲醛</span>
                    </p>
                    <p class="colormain">{{jiaquan}}&emsp;{{jiaquannum}}pg/m³</p>
                </div>
                <div class="flex_1 flex column acenter jcenter item">
                    <p>
                      <span>TVQC</span>
                    </p>
                    <p class="colormain">{{TVQC}}&emsp;{{TVQCnum}}pg/m³</p>
                </div>
              </dd>
              <dd class="flex_1 flex">
                  <div class="flex_1 flex column acenter jcenter item">
                      <p>
                        <span>CO2</span>
                      </p>
                      <p class="colormain">{{co2}}&emsp;{{co2num}}pg/m³</p>
                  </div>
                  <div class="flex_1 flex column acenter jcenter item">
                      <p>
                        <span>温湿度</span>
                      </p>
                      <div>
                        <p>温度&emsp;<label class="colormain">{{wendu}}℃</label></p>
                        <p>湿度&emsp;<label class="colorwarn">{{shidu}}%</label></p>
                      </div>
                  </div>
                </dd>
          </dl>
      </section>
      <footer>
        <a href="controls.html" class="remotebtn tcenter big18">远程控制</a>
      </footer>
  </div>
  <script>
    var Page = new Vue({
      el: '#main',
      data: {
        area: '优',
        areaqua: '6',
        pmin: '4',
        pmout: '156',
        pm10in: '7',
        pm10out: '226',
        jiaquan: '优',
        jiaquannum: '2',
        TVQC: '良',
        TVQCnum: '34',
        co2: '好',
        co2num: '12',
        wendu: '23',
        shidu: '45'
      },
      mounted () {
        document.getElementsByTagName('body')[0].style.display = 'block';
      }
    })
  </script>
  <script>
      var socket = io();
      socket.on('connect', () => {
          log('连接成功：' + socket.id);
      });
      //接收消息
      socket.on('clientMsg', function (data) {
        console.log('clientMsg', data);
        // 赋值方法
        Page.area = '好'
     });
      //断开连接（系统方法disconnct不可更改为其它）
      socket.on('disconnect', function () {
        log('连接断开!');
      });
      //重新连接
      socket.on('reconnect', function () {
        log('重新连接...');
      });
      //连接失败
      socket.on('reconnect_error', function () {
        log('连接失败!');
      });
      function msgToSer (msg) {
          socket.emit('order', msg)
      }
      function log (message) {
          console.log('message', message);
      }
  </script>
</body>
</html>